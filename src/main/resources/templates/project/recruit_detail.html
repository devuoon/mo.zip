<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ëª¨ì§‘(mo.zip) - ë©¤ë²„ëª¨ì§‘ ìƒì„¸</title>
  <!-- css / font -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
        integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
        crossorigin="anonymous" referrerpolicy="no-referrer"/>
  <link rel="stylesheet" as="style" crossorigin
        href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/variable/pretendardvariable.min.css"/>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>
  <link rel="stylesheet" th:href="@{/css/reset.css}">
  <link rel="stylesheet" th:href="@{/css/common.css}">
  <link rel="stylesheet" th:href="@{/css/detail.css}">
  <!-- js -->
  <!-- jquery -->
  <script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4="
          crossorigin="anonymous"></script>
  <script th:src="@{/js/index.js}"></script>
  <script th:src="@{/js/common.js}"></script>
  <!-- favicon -->
  <link rel="icon" th:href="@{/img/favicon.ico}">
</head>
<body>
<header id="header">
  <th:block th:replace="~{fragment/header}"></th:block>
</header>
<!-- main -->
<main>
  <div class="wrap flex">
    <div class="content">
      <div class="main-contents">
        <div class="title-wrap">
          <span class="pj-type pj" th:classappend="${project.getProjectType() == 'ì‚¬ì´ë“œ í”„ë¡œì íŠ¸'? 'pj' : 'study'}" th:text="${project.getProjectType()}">ì‚¬ì´ë“œ
            í”„ë¡œì íŠ¸</span>
          <p class="title">
            <strong th:classappend="${project.status == 1 ? 'state-ing' : 'state-done'}" th:text="${project.status == 1 ? 'ëª¨ì§‘ ì¤‘' : 'ëª¨ì§‘ì™„ë£Œ'}"></strong>
            <th:block th:text="${project.getProjectName()}">ì—˜ë¦¬ìŠ¤ SW 4 ëª¨ì§‘í•©ë‹ˆë‹¤!</th:block>
          </p>
        </div>
        <!-- <p class="title">
    <strong class="state-done">ëª¨ì§‘ ì™„ë£Œ</strong> ì—˜ë¦¬ìŠ¤ SW 4ê¸°
    ëª¨ì§‘í•©ë‹ˆë‹¤!
  </p> -->
        <div class="info-wrap">
          <ul class="count">
            <li th:text="${project.getCreatedAt()}">2024ë…„ 4ì›” 30ì¼</li>
            <li><i class="fa-regular fa-hand"></i>
              <th:block th:text="${project.getMembers().size()}+'ëª…'">4ëª…</th:block>
            </li>
            <li><i class="fa-solid fa-eye"></i>
              <th:block th:text="${project.getViews()}+'íšŒ'">28íšŒ</th:block>
            </li>
          </ul>
          <a href="" class="share-Btn"><i class="fa-solid fa-share-nodes"></i>ê³µìœ í•˜ê¸°</a>
        </div>
        <!-- <input type="text" id="urlInput" value=""> -->
        <!-- <div class="copy-message" id="copyMessage">í˜ì´ì§€ URLì´ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!</div> -->
        <div class="list-wrap">
          <table>
            <tr>
              <td>ëª¨ì§‘ ì¸ì›</td>
              <td th:text="${project.getRecruitCount()} +'ëª…'">4ëª…</td>
              <td>ì§„í–‰ ë°©ì‹</td>
              <td th:text="${project.getProjectProcess()}">ì˜¨ë¼ì¸</td>
            </tr>
            <tr>
              <td>ëª¨ì§‘ ë¶„ì•¼</td>
              <td class="skill-td">
                <span class="work top" th:each="role : ${project.getRecruitRoles()}" th:text="${role}">ì „ì²´</span>
              </td>
              <td>ì‹œì‘ ì˜ˆì •</td>
              <td th:text="${project.getExceptTime()}">2024.06.09</td>
            </tr>
            <tr>
              <td>ìˆ˜í–‰ ëª©ì </td>
              <td th:text="${project.getProjectPurpose()}">í¬íŠ¸í´ë¦¬ì˜¤</td>
              <td>ì˜ˆìƒ ê¸°ê°„</td>
              <td th:text="${project.getExceptDate()} + 'ê°œì›”'">2ê°œì›”</td>
            </tr>
            <tr>
              <td>ì°¸ì—¬ ì‹œê°„</td>
              <td th:if="${project.getProjectTime() == 1}">ë§¤ì£¼ 4ì‹œê°„ ì´í•˜</td>
              <td th:if="${project.getProjectTime() == 2}">4ì‹œê°„ ~ 10ì‹œê°„</td>
              <td th:if="${project.getProjectTime() == 3}">10ì‹œê°„ ì´ìƒ</td>
              <td>ê¸°ìˆ  ìŠ¤íƒ</td>
              <td>
                <ul class="skill">
                  <li th:each="skill : ${project.getSkills()}">
                    <th:block th:switch="${skill}">
                      <img th:case="'AWS'" src="/img/aws.svg" alt="AWS"/>
                      <img th:case="'Docker'" src="/img/docker.svg" alt="Docker"/>
                      <img th:case="'Figma'" src="/img/figma.svg" alt="Figma"/>
                      <img th:case="'Flutter'" src="/img/flutter.svg" alt="Flutter"/>
                      <img th:case="'Git'" src="/img/git.svg" alt="Git"/>
                      <img th:case="'Java'" src="/img/java.svg" alt="Java"/>
                      <img th:case="'JavaScript'" src="/img/javascript.svg" alt="JavaScript"/>
                      <img th:case="'Jest'" src="/img/jest.svg" alt="Jest"/>
                      <img th:case="'Kotlin'" src="/img/kotlin.svg" alt="Kotlin"/>
                      <img th:case="'MongoDb'" src="/img/mongodb.svg" alt="MongoDb"/>
                      <img th:case="'MySQL'" src="/img/mysql.svg" alt="MySQL"/>
                      <img th:case="'Nodejs'" src="/img/nodejs.svg" alt="Nodejs"/>
                      <img th:case="'php'" src="/img/php.svg" alt="php"/>
                      <img th:case="'Python'" src="/img/python.svg" alt="Python"/>
                      <img th:case="'React'" src="/img/react.svg" alt="React"/>
                      <img th:case="'ReactNative'" src="/img/reactnative.svg" alt="ReactNative"/>
                      <img th:case="'Spring'" src="/img/spring.svg" alt="Spring"/>
                      <img th:case="'Svelte'" src="/img/svelte.svg" alt="Svelte"/>
                      <img th:case="'TypeScript'" src="/img/typescript.svg" alt="TypeScript"/>
                      <img th:case="'Vue'" src="/img/vue.svg" alt="Vue"/>
                      <!-- ì¶”ê°€ì ì¸ ìŠ¤í‚¬ì— ëŒ€í•œ caseë¥¼ ì—¬ê¸°ì— ì¶”ê°€ -->
                      <span th:case="*">[[${skill}]]</span>
                    </th:block>
                  </li>
                </ul>
              </td>
            </tr>
          </table>
        </div>
        <div class="pj-intro">
          <h2 class="title-contents">í”„ë¡œì íŠ¸ ì†Œê°œ</h2>
          <p class="content bottom" th:utext="${#strings.replace(project.getProjectInfo(), '\n', '<br/>')}">
          </p>
        </div>
        <p class="title-contents app">ğŸ– ì°¸ê°€ ì‹ ì²­ì ëª©ë¡&nbsp; <i class="fa-solid fa-circle-info"></i></p>
        <div class="app-wrap">
          <div class="application-box" th:each="member : ${project.getMembers()}">
            <div class="profile-top">
              <div style="display: none;" class="member-id-list" th:text="${member.getId()}"></div>
              <img th:src="@{/upload/{img}(img=${member.getProfileImageUrl()})}" alt="í”„ë¡œí•„ì´ë¯¸ì§€">
              <div>
                <span class="work" th:text="${member.getPosition()}">í”„ë¡ íŠ¸ì—”ë“œ</span>
                <span class="career" th:if="${member.getCareer() == 1}">í•™ìƒ/ì·¨ì¤€ìƒ</span>
                <span class="career" th:if="${member.getCareer() == 2}">ì‹ ì…</span>
                <span class="career" th:if="${member.getCareer() == 3}">1~3ë…„ì°¨</span>
                <span class="career" th:if="${member.getCareer() == 4}">3~5ë…„ì°¨</span>
                <span class="career" th:if="${member.getCareer() == 5}">5ë…„ì´ìƒ</span>
                <h3 th:text="${member.getUsername()}">ğŸ‘‘ ì´ìœ¤ì§€</h3>
              </div>
              <button th:if="${session.loginMember!=null && session.loginMember.getId() == project.getOwnerId()}"
                      class="addmem-button add"
                      th:onclick="|memberInvite(${member.getId()}, ${project.getId()})|">
                ë©¤ë²„ ì¶”ê°€
              </button>
            </div>
            <p class="app-date" th:text="${member.getCreatedAt()}">2024ë…„ 4ì›” 30ì¼</p>
          </div>

        </div>
      </div>
    </div>
    <div class="right-box">
      <div class="profile-box">
        <img th:src="@{/upload/{img}(img=${project.getOwnerInfo().getProfileImageUrl()})}" alt="í”„ë¡œí•„ì´ë¯¸ì§€">
        <div class="right-tag">
          <span class="work right" th:text="${project.getOwnerInfo().getPosition()}">ë°±ì—”ë“œ</span>
          <span class="career right" th:if="${project.getOwnerInfo().getCareer() ==1}">ì‹ ì…/ì·¨ì¤€ìƒ</span>
          <span class="career right" th:if="${project.getOwnerInfo().getCareer() ==2}">ì‹ ì…</span>
          <span class="career right" th:if="${project.getOwnerInfo().getCareer() ==3}">1~3ë…„ì°¨</span>
          <span class="career right" th:if="${project.getOwnerInfo().getCareer() ==4}">3~5ë…„ì°¨</span>
          <span class="career right" th:if="${project.getOwnerInfo().getCareer() ==5}">5ë…„ì°¨ì´ìƒ</span>
        </div>
        <h3 th:text="${project.getOwnerInfo().getUsername()}"> ì´ìœ¤ì§€</h3>
      </div>
      <button class="right-btn apply"
              th:if="${ session.loginMember!=null && session.loginMember.getId()!= project.getOwnerId()}"
              th:onclick="|projectJoin(${project.getId()})|"
      >í”„ë¡œì íŠ¸ ì°¸ì—¬ ì‹ ì²­
      </button>
      <th:block th:if="${session.loginMember == null}">
        <!-- ë¶ë§ˆí¬ ì•ˆí–ˆì„ë•Œ -->
        <button style="border: 1px solid var(--main-color); color: var(--main-color); background-color: white;"
                class="right-btn keep" th:onclick="|projectBookmark(${project.getId()})|">
          <i class="fa-regular fa-bookmark" style="color: var(--main-color);"></i>ë¶ë§ˆí¬
        </button>
      </th:block>
      <th:block th:if="${session.loginMember != null}">
        <!-- ë¶ë§ˆí¬ ì•ˆí–ˆì„ë•Œ -->
        <button th:if="${isBookmark == 0}" style="border: 1px solid var(--main-color); color: var(--main-color); background-color: white;"
                class="right-btn keep" th:onclick="|projectBookmark(${project.getId()})|">
          <i class="fa-regular fa-bookmark" style="color: var(--main-color);"></i>ë¶ë§ˆí¬
        </button>
        <!-- ë¶ë§ˆí¬ í–ˆì„ë•Œ -->
        <button th:if="${isBookmark == 1}" style="border: 1px solid var(--main-color); color: white; background-color: var(--main-color);"
                class="right-btn keep" th:onclick="|projectBookmark(${project.getId()})|">
          <i class="fa-regular fa-bookmark" style="color: white;"></i>ë¶ë§ˆí¬
        </button>
      </th:block>
      <button id="btnRecruitDone" class="right-btn confirm open-modal"
              th:if="${session.loginMember != null && session.loginMember.getId()==project.getOwnerId() && project.getStatus()==1}"
      >ëª¨ì§‘ì™„ë£Œ í•˜ê¸°
      </button>
      <button id="btnRecruitDone" class="right-btn confirm-done open-modal"
              th:if="${session.loginMember != null && session.loginMember.getId()==project.getOwnerId() && project.getStatus()==0}"
      >ëª¨ì§‘ì™„ë£Œ
      </button>

      <div class="edit-btn">
        <a th:href="@{/project/edit/{projectId}(projectId=${project.getId()})}">
          <button th:if="${session.loginMember!=null && session.loginMember.getId()==project.getOwnerId()}" class="right-btn mod_btn">ìˆ˜ì •</button>
        </a>
        <button th:if="${session.loginMember!=null && session.loginMember.getId()==project.getOwnerId()}" class="right-btn del_btn open-modal02">ì‚­ì œ
        </button>
      </div>

      <p class="current-mem">ğŸ‘©â€ğŸ‘¦â€ğŸ‘¦ í˜„ì¬ ì°¸ì—¬ ì¸ì› <span th:text="${project.getProjectMemberCount()}">5</span>ëª…</p>

    </div>
    <!-- ëª¨ë‹¬ì°½ -->
    <div class="modal-bg">
    </div>
    <div class="modal">
      <div class="modal-header">
        <a href="#" class="close-modal"><i class="fa-solid fa-xmark"></i></a>
      </div>
      <h3 id="modalTitle" class="modal-title" th:if="${project.getStatus()==1}">ëª¨ì§‘ì„ ì™„ë£Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?</h3>
      <h3 id="modalTitle" class="modal-title" th:if="${project.getStatus()==0}">ëª¨ì§‘ì™„ë£Œë¥¼ ì·¨ì†Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?</h3>
      <div class="button-wrap">
        <button class="close-modal-back">ëŒì•„ê°€ê¸°</button>
        <button id="modalBtn" th:if="${project.getStatus()==1}" class="submit-modal" type="submit" th:onclick="|recruitDone(${project.getId()})|">ëª¨ì§‘
          ì™„ë£Œí•˜ê¸°
        </button>
        <button id="modalBtn" th:if="${project.getStatus()==0}" class="submit-modal" type="submit"
                th:onclick="|recruitDone(${project.getId()})|">ëª¨ì§‘ì™„ë£Œ ì·¨ì†Œí•˜ê¸°
        </button>
      </div>
    </div>
    <div class="modal-bg bg02">
    </div>
    <div class="modal02">
      <div class="modal-header">
        <a href="#" class="close-modal02"><i class="fa-solid fa-xmark"></i></a>
      </div>
      <h3>ê²Œì‹œê¸€ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?</h3>
      <p>ì‚­ì œ í›„ì—ëŠ” ê²Œì‹œê¸€ì„ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
      <div class="button-wrap">
        <button class="close-modal02-back">ëŒì•„ê°€ê¸°</button>
        <button class="submit-modal" type="submit" th:onclick="|deleteProject(${project.getId()})|">ì‚­ì œí•˜ê¸°</button>
      </div>
    </div>
  </div>
</main>
<!-- ë¡œê·¸ì¸ ìœ ë¬´ -->
<th:block th:if="${session.loginMember != null}">
  <div class="loginMember" th:text="${session.loginMember.getId()}" style="display: none"></div>
</th:block>
<th:block th:if="${session.loginMember == null}">
  <div class="loginMember" style="display: none">0</div>
</th:block>
<footer>
  <th:block th:replace="~{fragment/footer}"></th:block>
</footer>
<script>
    // í”„ë¡œì íŠ¸ ì°¸ì—¬ì‹ ì²­
    function projectJoin(projectId) {
        // í˜„ì¬ ë¡œê·¸ì¸í•œ ìœ ì €ì˜ ID
        let loginMemberId = document.querySelector(".loginMember").textContent;
        let logicCheck = -1;

        // ì‹ ì²­ì ëª©ë¡ì—ì„œ ë¡œê·¸ì¸í•œ ë©¤ë²„ê°€ ìˆë‹¤ë©´ alert() ì¶œë ¥ í›„ í•¨ìˆ˜ ì¢…ë£Œ
        document.querySelectorAll(".member-id-list").forEach(item => {
            if (item.textContent === loginMemberId)
                logicCheck = 1;
        });

        if (logicCheck == 1)
            alert("ì´ë¯¸ ì‹ ì²­í•˜ì…¨ìŠµë‹ˆë‹¤ !");
        else {
            // ì‹ ì²­í•œ ìœ ì €ê°€ ì•„ë‹ˆë©´ ì•„ë˜ ë¡œì§ì´ ì‹¤í–‰ë¨.
            $.ajax({
                type: "POST",
                url: "/api/project/join",
                contentType: "application/x-www-form-urlencoded; charset=utr-8",
                data: {"memberId": loginMemberId, "projectId": projectId},
                dataType: "json"
            }).done(res => {
                console.log("í†µì‹ ì„±ê³µ!", res);
                let career;

                if (res.data.career == '1') res.data.career = 'í•™ìƒ/ì·¨ì¤€ìƒ';
                else if (res.data.career == '2') res.data.career = 'ì‹ ì…';
                else if (res.data.career == '3') res.data.career = '1~3ë…„ì°¨';
                else if (res.data.career == '4') res.data.career = '3~5ë…„ì°¨';
                else if (res.data.career == '5') res.data.career = '5ë…„ì´ìƒ';
                let item =
                    `
                    <div class='application-box'>
                      <div class="profile-top">
                        <div style="display: none;" class="member-id-list">${res.data.id}</div>
                        <img src="/upload/${res.data.profileImageUrl}" alt="í”„ë¡œí•„ì´ë¯¸ì§€">
                        <div>
                          <span class="work">${res.data.position}</span>
                          <span class="career">${res.data.career}</span>
                          <h3>${res.data.username}</h3>
                        </div>
                      </div>
                      <p class="app-date">${res.data.createdAt}</p>
                    </div>
                    `;

                $('.app-wrap').append(item);
            }).fail(error => {
                console.log("í†µì‹ ì‹¤íŒ¨!", error);
            });
        }
    }

    // í”„ë¡œì íŠ¸ ì‚­ì œ
    // TODO : URL ë³€ê²½ í•„ìš”í•¨(URLì— ì •ë³´ ë…¸ì¶œ X)
    function deleteProject(projectId) {
        $.ajax({
            type: "DELETE",
            url: "/api/show/" + projectId,
            contentType: "application/json; charset=utf-8",
            dataType: "json"
        }).done(res => { // HTTP ìƒíƒœ ì½”ë“œ 200ë²ˆëŒ€ì¼ ë•Œ í˜¸ì¶œë¨
            console.log("ì„±ê³µ:", res);
            alert("ê²Œì‹œê¸€ì´ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤."); // ì„œë²„ì—ì„œ ë°˜í™˜ëœ ë©”ì‹œì§€ í‘œì‹œ
            window.location.replace(`/project`);
        }).fail(error => { // HTTP ìƒíƒœ ì½”ë“œ 200ë²ˆëŒ€ê°€ ì•„ë‹ ë•Œ í˜¸ì¶œë¨
            alert("ê²Œì‹œê¸€ ì‚­ì œë¥¼ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”."); // ì„œë²„ì—ì„œ ë°˜í™˜ëœ ë©”ì‹œì§€ ëŒ€ì‹  ê³ ì • ë©”ì‹œì§€ í‘œì‹œ
        });
    }

    // ë©¤ë²„ì¶”ê°€ë²„íŠ¼
    function memberInvite(memberId, projectId) {
        console.log(memberId);
        $.ajax({
            type: "post",
            url: "/api/email",
            contentType: "application/x-www-form-urlencoded; charset=utr-8",
            data: {"memberId": memberId, "projectId": projectId},
            dataType: "json",
        }).done(res => {
            console.log("í†µì‹ ì„±ê³µ!", res);
            let receiveId = res.data;
            // receiveId ê°€ 1ì´ë©´ ë©¤ë²„ì´ˆëŒ€ , -1ì´ë©´ ì´ˆëŒ€í•œë©¤ë²„
            if(receiveId == 1)
                alert("ì´ë¯¸ ì´ˆëŒ€í•œ ë©¤ë²„ì…ë‹ˆë‹¤!");
            else
              alert("ë©¤ë²„ì´ˆëŒ€ ì´ë©”ì¼ì„ ì „ì†¡í•˜ì˜€ìŠµë‹ˆë‹¤ !")
        }).fail(error => {
            console.log("í†µì‹ ì‹¤íŒ¨!", error);
            alert("ë©¤ë²„ì´ˆëŒ€ë¥¼ ì‹¤íŒ¨í•˜ì…¨ìŠµë‹ˆë‹¤ !");
        });
    }

    // í”„ë¡œì íŠ¸ ëª¨ì§‘ì™„ë£Œ
    function recruitDone(projectId) {
        console.log(projectId);
        $.ajax({
            type: "patch",
            url: '/api/recruit/done',
            contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
            data: {"projectId": projectId},
            dataType: "json"
        }).done(res => {
            console.log(res);
            if (res.data == 1) {
                // ëª¨ì§‘ì™„ë£Œ
                $("#btnRecruitDone").css("background-color", "var(--gray-font2)");
                $("#btnRecruitDone").css("color", "color: #fff;");
                $("#btnRecruitDone").text("ëª¨ì§‘ì™„ë£Œ");
                $(".state-ing").text("ëª¨ì§‘ì™„ë£Œ")
                $("#modalTitle").html("ëª¨ì§‘ì™„ë£Œë¥¼ ì·¨ì†Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?");
                $("#modalBtn").html("ëª¨ì§‘ì™„ë£Œ ì·¨ì†Œí•˜ê¸°");
                document.querySelector(".modal-bg").classList.remove("visible");
                document.querySelector(".modal").classList.remove("visible");
            } else {
                // ëª¨ì§‘ì™„ë£Œ ì·¨ì†Œ
                $("#btnRecruitDone").css("background-color", "var(--main-color)");
                $("#btnRecruitDone").css("color", "color: #fff;");
                $("#btnRecruitDone").text("ëª¨ì§‘ì™„ë£Œ í•˜ê¸°");
                $(".state-ing").text("ëª¨ì§‘ ì¤‘")
                $("#modalTitle").html("ëª¨ì§‘ì„ ì™„ë£Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?");
                $("#modalBtn").html("ëª¨ì§‘ ì™„ë£Œí•˜ê¸°");
                document.querySelector(".modal-bg").classList.remove("visible");
                document.querySelector(".modal").classList.remove("visible");
            }
        }).fail(error => {
            console.log("í†µì‹ ì‹¤íŒ¨!", error);
        })
    }

    // ë¶ë§ˆí¬ ëˆŒë €ì„ ë•Œ ì‹¤ì‹œê°„ìœ¼ë¡œ ìƒ‰ì´ ë³€í•˜ê²Œ í•˜ëŠ” ë¡œì§(ë¶ë§ˆí¬ ì¤‘ì´ë©´ main_color, ë¶ë§ˆí¬ë¥¼ ì•ˆí•˜ë©´ ìƒ‰ ì—†ìŒ / ë¹„ë™ê¸° ë°©ì‹)
    function projectBookmark(projectId) {
        let memberId = document.querySelector(".loginMember").textContent;
        console.log("memberId:", memberId); // memberIdê°€ ì˜¬ë°”ë¥´ê²Œ ì„¤ì •ë˜ì—ˆëŠ”ì§€ í™•ì¸
        let data = {};
        data.memberId = memberId;
        data.projectId = projectId;
        // data.key = value -> data{ key: value}

        if (memberId == 0)   // ë¡œê·¸ì¸ì´ ë˜ì–´ìˆì§€ ì•Šì„ ë•Œ
            alert("ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤ !");
        else {       // ë¡œê·¸ì¸ì´ ë˜ì–´ìˆì„ ë•Œ
            // ë¶ë§ˆí¬ ë¡œì§ ì‹œì‘
            $.ajax({
                type: "POST",
                url: "/api/keep",
                data: JSON.stringify(data),
                contentType: "application/json; charset=utf-8",
                dataType: "json"
            }).done(res => { // HttpStatus 200ë²ˆëŒ€(ë¡œë“œ ì„±ê³µ)
                console.log("ì„±ê³µ");

                if (res.data == 1) { // ì„œë²„ ì‘ë‹µì— ë¶ë§ˆí¬ ìƒíƒœ í¬í•¨í•œë‹¤ê³  ê°€ì •
                    // ë¶ë§ˆí¬ê°€ ì¶”ê°€ëœ ê²½ìš°
                    $(".keep").css("background-color", "var(--main-color)");
                    $(".keep").css("border", "1px solid var(--main-color)");
                    $(".keep").css("color", "white");
                    $(".keep").html('<i class="fa-regular fa-bookmark" style="color: white;"></i> ë¶ë§ˆí¬');
                    alert("ë¶ë§ˆí¬ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!");
                } else if (res.data == 0) {
                    // ë¶ë§ˆí¬ê°€ ì·¨ì†Œëœ ê²½ìš°
                    $(".keep").css("background-color", "white");
                    $(".keep").css("color", "var(--main-color)");
                    $(".keep").css("border", "1px solid var(--main-color)");
                    $(".keep").html('<i class="fa-regular fa-bookmark" style="color: var(--main-color);"></i> ë¶ë§ˆí¬');
                    alert("ë¶ë§ˆí¬ê°€ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤!");
                }
            }).fail(error => { // HttpStatus 200ë²ˆëŒ€ê°€ ì•„ë‹ë•Œ(ë¡œë“œ ì‹¤íŒ¨)
                console.log(error);
                alert("ì‹¤íŒ¨..");
            });
        }
    }

    // ëª¨ì§‘ì™„ë£Œ ëª¨ë‹¬
    document.querySelector(".open-modal").addEventListener("click", function () {
        document.querySelector(".modal-bg").classList.add("visible");
        document.querySelector(".modal").classList.add("visible");
    });

    document.querySelector(".close-modal").addEventListener("click", function () {
        document.querySelector(".modal-bg").classList.remove("visible");
        document.querySelector(".modal").classList.remove("visible");
    });

    document.querySelector(".close-modal-back").addEventListener("click", function () {
        document.querySelector(".modal-bg").classList.remove("visible");
        document.querySelector(".modal").classList.remove("visible");
    });

    // ì‚­ì œ ëª¨ë‹¬
    document.querySelector(".open-modal02").addEventListener("click", function () {
        document.querySelector(".bg02").classList.add("visible");
        document.querySelector(".modal02").classList.add("visible");
    });

    document.querySelector(".close-modal02-back").addEventListener("click", function () {
        document.querySelector(".bg02").classList.remove("visible");
        document.querySelector(".modal02").classList.remove("visible");
    });

    document.querySelector(".close-modal02").addEventListener("click", function () {
        document.querySelector(".bg02").classList.remove("visible");
        document.querySelector(".modal02").classList.remove("visible");
    });

    // ë°”ê¹¥ì˜ì—­ í´ë¦­ ì‹œ ì¢…ë£Œ
    document.addEventListener("click", function (event) {
        if (
            !event.target.closest(".modal, .open-modal, .open-modal02, .modal02")
        ) {
            document.querySelector(".modal").classList.remove("visible");
            document.querySelector(".modal-bg").classList.remove("visible");

            document.querySelector(".modal02").classList.remove("visible");
            document.querySelector(".bg02").classList.remove("visible");

            document.body.classList.remove("modal-open");
        }
    });
</script>
</body>
</html>